--// Safe Load Fluent UI
local url = "https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua"
local Library
local success, result = pcall(function()
    return loadstring(game:HttpGet(url))()
end)

if success and result then
    Library = result
else
    warn("❌ Không thể load Fluent UI library. Kiểm tra lại mạng hoặc link.")
    return
end

--// Tạo Window
local MainWindow = Library:CreateWindow({
    Title = "BIBEE |",
    SubTitle = "tiktok:_ivaa_ltnmh21",
    TabWidth = 120,
    Size = UDim2.fromOffset(520, 300),
    Acrylic = true,
    Theme = "Black",
    MinimizeKey = Enum.KeyCode.RightControl
})

--// Tabs
local Tabs = {}
Tabs.main = MainWindow:AddTab({ Title = "Game" })

--// Services
local Players = game:GetService("Players")
local VirtualUser = game:GetService("VirtualUser")
local UserInputService = game:GetService("UserInputService")
local player = Players.LocalPlayer

--========================
-- Anti AFK
--========================
local afkConnection = nil

Tabs.main:AddToggle("AntiAFK_Toggle", {
    Title = "Anti AFK",
    Default = false,
    Callback = function(state)
        if state then
            afkConnection = player.Idled:Connect(function()
                VirtualUser:Button2Down(Vector2.new(0,0), workspace.CurrentCamera.CFrame)
                task.wait(1)
                VirtualUser:Button2Up(Vector2.new(0,0), workspace.CurrentCamera.CFrame)
            end)

            Library:Notify({
                Title = "Anti AFK",
                Content = "✅ Anti-AFK đã được bật!",
                Duration = 4
            })
        else
            if afkConnection then
                afkConnection:Disconnect()
                afkConnection = nil
            end

            Library:Notify({
                Title = "Anti AFK",
                Content = "❌ Anti-AFK đã tắt.",
                Duration = 4
            })
        end
    end
})

--========================
-- Auto Click
--========================
local autoClickEnabled = false

Tabs.main:AddToggle("AutoClick_Toggle", {
    Title = "Auto Click (chuột trái)",
    Default = false,
    Callback = function(state)
        autoClickEnabled = state
        if state then
            Library:Notify({
                Title = "Auto Click",
                Content = "✅ Auto Click đã bật! Giữ chuột trái để bắn/đánh.",
                Duration = 4
            })
            -- Loop click
            task.spawn(function()
                while autoClickEnabled do
                    task.wait(0.1) -- tốc độ click (0.1s = 10 CPS)
                    VirtualUser:Button1Down(Vector2.new(0,0), workspace.CurrentCamera.CFrame)
                    task.wait()
                    VirtualUser:Button1Up(Vector2.new(0,0), workspace.CurrentCamera.CFrame)
                end
            end)
        else
            Library:Notify({
                Title = "Auto Click",
                Content = "❌ Auto Click đã tắt.",
                Duration = 4
            })
        end
    end
})
